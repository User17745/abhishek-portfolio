---
import { resumes } from "@/data/resumes";
import { Terminal, Copy, Check } from "lucide-react";
---

<section class="py-16 px-4">
  <div class="container mx-auto">
    <div class="max-w-2xl mx-auto">
      <div class="fade-in text-center mb-8">
        <h2 class="text-2xl font-bold mb-2">Quick Start</h2>
        <p class="text-muted-foreground text-sm">
          Run the following command to download Abhishek documentation (resume):
        </p>
      </div>
      
      <div class="fade-in stagger-1">
        <div class="rounded-xl border border-border bg-card overflow-hidden shadow-lg">
          <!-- Terminal header -->
          <div class="flex items-center gap-2 px-4 py-3 bg-muted/50 border-b border-border">
            <Terminal class="h-4 w-4 text-muted-foreground" />
            <span class="text-xs text-muted-foreground font-mono">bash</span>
          </div>
          
          <!-- Tabs -->
          <div class="border-b border-border">
            <div class="flex overflow-x-auto">
              <button 
                data-tab="all" 
                class="tab-btn px-4 py-2 text-xs font-medium border-b-2 border-accent text-accent"
              >
                All
              </button>
              <button 
                data-tab="sol_eng" 
                class="tab-btn px-4 py-2 text-xs font-medium border-b-2 border-transparent text-muted-foreground hover:text-foreground"
              >
                Solutions
              </button>
              <button 
                data-tab="ecom" 
                class="tab-btn px-4 py-2 text-xs font-medium border-b-2 border-transparent text-muted-foreground hover:text-foreground"
              >
                eCommerce
              </button>
              <button 
                data-tab="pmo" 
                class="tab-btn px-4 py-2 text-xs font-medium border-b-2 border-transparent text-muted-foreground hover:text-foreground"
              >
                PMO
              </button>
              <button 
                data-tab="prod" 
                class="tab-btn px-4 py-2 text-xs font-medium border-b-2 border-transparent text-muted-foreground hover:text-foreground"
              >
                Product
              </button>
              <button 
                data-tab="tpm" 
                class="tab-btn px-4 py-2 text-xs font-medium border-b-2 border-transparent text-muted-foreground hover:text-foreground"
              >
                TPM
              </button>
              <button 
                data-tab="shop_pm" 
                class="tab-btn px-4 py-2 text-xs font-medium border-b-2 border-transparent text-muted-foreground hover:text-foreground"
              >
                Shopify
              </button>
            </div>
          </div>
          
          <!-- Code block -->
          <div class="relative">
            <div class="p-4 font-mono text-sm">
              <div data-content="all" class="code-content">
                <span class="text-muted-foreground">$</span> <span class="text-highlight">curl</span> -fsSL https://abhishekaggarwal.com/install.sh <span class="text-accent">|</span> bash -s -- <span class="text-success">"all"</span>
              </div>
              <div data-content="sol_eng" class="code-content hidden">
                <span class="text-muted-foreground">$</span> <span class="text-highlight">curl</span> -fsSL https://abhishekaggarwal.com/install.sh <span class="text-accent">|</span> bash -s -- <span class="text-success">"sol_eng"</span>
              </div>
              <div data-content="ecom" class="code-content hidden">
                <span class="text-muted-foreground">$</span> <span class="text-highlight">curl</span> -fsSL https://abhishekaggarwal.com/install.sh <span class="text-accent">|</span> bash -s -- <span class="text-success">"ecom"</span>
              </div>
              <div data-content="pmo" class="code-content hidden">
                <span class="text-muted-foreground">$</span> <span class="text-highlight">curl</span> -fsSL https://abhishekaggarwal.com/install.sh <span class="text-accent">|</span> bash -s -- <span class="text-success">"pmo"</span>
              </div>
              <div data-content="prod" class="code-content hidden">
                <span class="text-muted-foreground">$</span> <span class="text-highlight">curl</span> -fsSL https://abhishekaggarwal.com/install.sh <span class="text-accent">|</span> bash -s -- <span class="text-success">"prod"</span>
              </div>
              <div data-content="tpm" class="code-content hidden">
                <span class="text-muted-foreground">$</span> <span class="text-highlight">curl</span> -fsSL https://abhishekaggarwal.com/install.sh <span class="text-accent">|</span> bash -s -- <span class="text-success">"tpm"</span>
              </div>
              <div data-content="shop_pm" class="code-content hidden">
                <span class="text-muted-foreground">$</span> <span class="text-highlight">curl</span> -fsSL https://abhishekaggarwal.com/install.sh <span class="text-accent">|</span> bash -s -- <span class="text-success">"shop_pm"</span>
              </div>
            </div>
            <button 
              id="copy-btn"
              class="absolute top-3 right-3 p-2 rounded-md hover:bg-muted transition-colors"
              aria-label="Copy to clipboard"
            >
              <Copy class="h-4 w-4 text-muted-foreground copy-icon" />
              <Check class="h-4 w-4 text-success check-icon hidden" />
            </button>
          </div>
        </div>
      </div>
      
      <div class="fade-in stagger-2 mt-4 text-center">
        <p class="text-xs text-muted-foreground">
          Works on macOS, Linux, and Windows (via Git Bash or WSL)
        </p>
      </div>
    </div>
  </div>
</section>

<script>
  const tabBtns = document.querySelectorAll('.tab-btn');
  const codeContents = document.querySelectorAll('.code-content');
  const copyBtn = document.getElementById('copy-btn');
  const copyIcon = document.querySelector('.copy-icon');
  const checkIcon = document.querySelector('.check-icon');
  
  const commands: Record<string, string> = {
    all: 'curl -fsSL https://abhishekaggarwal.com/install.sh | bash -s -- "all"',
    sol_eng: 'curl -fsSL https://abhishekaggarwal.com/install.sh | bash -s -- "sol_eng"',
    ecom: 'curl -fsSL https://abhishekaggarwal.com/install.sh | bash -s -- "ecom"',
    pmo: 'curl -fsSL https://abhishekaggarwal.com/install.sh | bash -s -- "pmo"',
    prod: 'curl -fsSL https://abhishekaggarwal.com/install.sh | bash -s -- "prod"',
    tpm: 'curl -fsSL https://abhishekaggarwal.com/install.sh | bash -s -- "tpm"',
    shop_pm: 'curl -fsSL https://abhishekaggarwal.com/install.sh | bash -s -- "shop_pm"',
  };
  
  let currentTab = 'all';
  
  tabBtns.forEach(btn => {
    btn.addEventListener('click', () => {
      const tab = btn.getAttribute('data-tab') || 'all';
      currentTab = tab;
      
      // Update active tab styling
      tabBtns.forEach(b => {
        b.classList.remove('border-accent', 'text-accent');
        b.classList.add('border-transparent', 'text-muted-foreground');
      });
      btn.classList.remove('border-transparent', 'text-muted-foreground');
      btn.classList.add('border-accent', 'text-accent');
      
      // Show corresponding content
      codeContents.forEach(content => {
        content.classList.add('hidden');
      });
      document.querySelector(`[data-content="${tab}"]`)?.classList.remove('hidden');
    });
  });
  
  copyBtn?.addEventListener('click', async () => {
    const command = commands[currentTab];
    await navigator.clipboard.writeText(command);
    
    copyIcon?.classList.add('hidden');
    checkIcon?.classList.remove('hidden');
    
    setTimeout(() => {
      copyIcon?.classList.remove('hidden');
      checkIcon?.classList.add('hidden');
    }, 2000);
  });
</script>
