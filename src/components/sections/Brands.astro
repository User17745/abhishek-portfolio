---
import { brands } from "@/data/brands";
import BrandLogo from "@/components/shared/BrandLogo";

// Prioritize brands with logos
const sortedBrands = [...brands].sort((a, b) => {
  if (a.logo && !b.logo) return -1;
  if (!a.logo && b.logo) return 1;
  return 0;
});
---

<section id="brands" class="py-12 bg-muted/30 border-y border-border/40 relative overflow-hidden">
  <!-- Subtle background glow -->
  <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[300px] bg-accent/5 blur-[120px] pointer-events-none"></div>

  <div class="container mx-auto px-4 relative z-10">
    <div class="flex flex-col md:flex-row items-center justify-between gap-6 mb-12">
      <div class="max-w-xl text-center md:text-left">
        <h2 class="text-2xl font-bold mb-2 tracking-tight">Brands I've Worked With</h2>
        <p class="text-muted-foreground text-sm">
          Collaborated with global enterprises and retail giants across GCC & India.
        </p>
      </div>
      <div class="hidden sm:flex items-center gap-4 text-[10px] uppercase tracking-wider font-semibold text-muted-foreground/70 bg-background/40 backdrop-blur-sm px-4 py-2 rounded-full border border-border/30">
        <span class="flex items-center gap-1.5"><span class="w-1.5 h-1.5 rounded-full bg-blue-500/70"></span> Enterprise</span>
        <span class="flex items-center gap-1.5"><span class="w-1.5 h-1.5 rounded-full bg-orange-500/70"></span> Retail</span>
        <span class="flex items-center gap-1.5"><span class="w-1.5 h-1.5 rounded-full bg-purple-500/70"></span> D2C</span>
      </div>
    </div>
    
    <div class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-9 gap-x-4 gap-y-10 items-start justify-items-center">
      {sortedBrands.map((brand, index) => (
        <div 
          class="fade-in group flex flex-col items-center gap-3 transition-opacity duration-300"
          style={`animation-delay: ${index * 30}ms`}
        >
          <div class="relative">
            <BrandLogo 
              name={brand.name} 
              color={brand.color} 
              logo={brand.logo}
              size="lg" 
              client:load 
            />
          </div>
          <span class="text-[9px] md:text-[10px] font-medium text-muted-foreground/60 group-hover:text-foreground group-hover:opacity-100 transition-all text-center leading-tight w-full max-w-[70px] uppercase tracking-tighter">
            {brand.name}
          </span>
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  .fade-in {
    opacity: 0;
    transform: translateY(8px);
    animation: fadeIn 0.4s ease-out forwards;
  }
  
  @keyframes fadeIn {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Optimize logos for dark mode if needed, but the current greyscale logic handles it well */
</style>
